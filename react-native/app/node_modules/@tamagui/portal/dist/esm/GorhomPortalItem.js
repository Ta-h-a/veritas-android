import { useIsomorphicLayoutEffect } from "@tamagui/constants";
import { useState } from "react";
import { createPortal } from "react-dom";
import { allPortalHosts, portalListeners } from "./constants";
const GorhomPortalItem = (props) => {
  !props.hostName && !props.passThrough && console.warn("No hostName");
  const cur = allPortalHosts.get(props.hostName || ""), [node, setNode] = useState(cur);
  return !props.passThrough && cur && node !== cur && setNode(cur), useIsomorphicLayoutEffect(() => {
    if (!props.hostName || node) return;
    const listener = (newNode) => {
      setNode(newNode);
    };
    return portalListeners[props.hostName] ||= /* @__PURE__ */ new Set(), portalListeners[props.hostName].add(listener), () => {
      portalListeners[props.hostName]?.delete(listener);
    };
  }, [node]), props.passThrough ? props.children : node ? createPortal(props.children, node) : null;
};
export {
  GorhomPortalItem
};
//# sourceMappingURL=GorhomPortalItem.js.map
